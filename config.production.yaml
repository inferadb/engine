# InferaDB Engine Configuration - Production Template
#
# This is a template for production deployment. Replace all placeholder values
# (marked with <...>) with your actual production values.
#
# SECURITY: Do not commit this file with real credentials to version control.
# Use environment variables or a secrets management system in production.
#
# This file uses the unified configuration format. Both engine and control
# can share the same config file by reading their respective sections.

engine:
  # Worker threads (recommended: number of CPU cores)
  threads: 16
  logging: "info"

  listen:
    # Client-facing HTTP/REST API server
    http: "0.0.0.0:8080"

    # Client-facing gRPC API server
    grpc: "0.0.0.0:8081"

    # Service mesh / inter-service communication
    mesh: "0.0.0.0:8082"

  storage:
    # Use FoundationDB for production
    backend: "foundationdb"

    # FoundationDB cluster file path
    # This file contains the connection string for your FDB cluster
    fdb_cluster_file: "/etc/foundationdb/fdb.cluster"

  cache:
    enabled: true
    max_capacity: 1000000  # 1M entries for high-throughput
    ttl: 300

  authentication:
    management_api_timeout_ms: 5000
    management_cache_ttl: 600  # Longer cache for performance
    cert_cache_ttl: 1800  # 30 minutes

    # Optional: Enable JWT replay protection (requires Redis)
    # Prevents reuse of JWT tokens by tracking jti claims
    # replay_protection: true
    # redis_url: "redis://redis-cluster:6379"
    # redis_key_prefix: "infera:jti:"
    # redis_ttl_seconds: 300
